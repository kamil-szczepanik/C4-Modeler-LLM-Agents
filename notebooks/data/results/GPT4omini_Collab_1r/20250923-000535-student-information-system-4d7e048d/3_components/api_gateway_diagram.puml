@startuml
!include https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Component.puml
LAYOUT_WITH_LEGEND()

System_Boundary(api_gateway, "API Gateway") {
    Component(api_gateway, "API Gateway", "Google Cloud Endpoints or Apigee", "Acts as the single entry point for all client requests, routes requests to appropriate backend services, handles authentication and authorization, implements rate limiting, and provides logging and monitoring.")
    Component(auth_module, "Authentication & Authorization Module", "N/A", "Validates user credentials against the IMS, issues tokens for authenticated sessions, and enforces access control policies based on user roles.")
    Component(request_routing_module, "Request Routing Module", "N/A", "Analyzes incoming requests and determines the appropriate service to handle them, transforms requests and responses as necessary.")
    Component(logging_monitoring_module, "Logging & Monitoring Module", "N/A", "Captures and stores logs for all API requests and responses, monitors system performance and uptime, and generates alerts for anomalies or failures.")
    Component(error_handling_module, "Error Handling Module", "N/A", "Centralizes error handling for all API requests, returns standardized error responses to clients, and logs errors for further analysis.")
}

Rel(api_gateway, auth_module, "Checks user credentials and permissions before routing requests.")
Rel(api_gateway, request_routing_module, "Determines the correct backend service for each request.")
Rel(api_gateway, logging_monitoring_module, "Logs all requests and responses for compliance and performance monitoring.")
Rel(api_gateway, error_handling_module, "Manages errors encountered during request processing.")
@enduml