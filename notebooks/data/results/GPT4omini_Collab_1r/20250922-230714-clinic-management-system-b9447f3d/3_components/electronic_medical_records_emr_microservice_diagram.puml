@startuml
!include https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Component.puml
LAYOUT_WITH_LEGEND()

System_Boundary(emr_microservice, "Electronic Medical Records (EMR) Microservice") {
    Component(api_controller, "API Controller", "Spring MVC Controller", "Handle incoming HTTP requests related to EMR operations, validate incoming data, and return appropriate HTTP responses.")
    Component(service_layer, "Service Layer", "Spring Service", "Implement business logic for managing EMR, interact with the repository layer, and handle transactions.")
    Component(repository_layer, "Repository Layer", "Spring Data JPA and MongoDB", "Abstract data access logic and provide an interface for CRUD operations on the database.")
    Component(domain_model, "Domain Model", "Java Domain Model", "Define core entities and their relationships within the EMR context.")
    Component(integration_layer, "Integration Layer", "Spring Integration", "Handle communication with external systems using HL7 FHIR APIs.")
}

Rel(api_controller, service_layer, "Invokes")
Rel(service_layer, repository_layer, "Uses")
Rel(service_layer, domain_model, "Interacts with")
Rel(integration_layer, service_layer, "Communicates with")