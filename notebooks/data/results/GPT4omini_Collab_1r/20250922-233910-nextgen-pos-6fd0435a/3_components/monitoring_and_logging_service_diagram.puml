@startuml
!include https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Component.puml
LAYOUT_WITH_LEGEND()

System_Boundary(monitoring_logging_service, "Monitoring and Logging Service") {
    Component(mc, "Monitoring Controller", "Node.js, Express", "Expose APIs for monitoring metrics and health checks; aggregate performance data from various services.")
    Component(ls, "Logging Service", "Node.js, Express", "Handle logging of transactions and system events; ensure logs are structured and can be queried for audits and troubleshooting.")
    Component(mc, "Metrics Collector", "Node.js, Express", "Collect and process metrics from various components of the POS system; interface with AWS CloudWatch for storing and visualizing metrics.")
    Component(as, "Alerting Service", "Node.js, Express", "Monitor metrics for thresholds and trigger alerts when anomalies are detected; integrate with notification systems for alerting the operations team.")
    Component(drm, "Data Retention Manager", "Node.js, Express", "Manage the lifecycle of logs and metrics data, ensuring compliance with data retention policies; purge old data based on defined retention schedules.")
}

Rel(mc, mc, "Interacts for health checks.")
Rel(mc, ls, "Interacts for insights into system events.")
Rel(ls, mc, "Interacts for performance-related events.")
Rel(ls, drm, "Interacts for log retention.")
Rel(mc, as, "Interacts for alerting based on metrics.")
Rel(mc, mc, "Interacts for metrics data.")
Rel(as, mc, "Interacts for metrics changes.")
Rel(drm, ls, "Interacts for log lifecycle management.")
@enduml