@startuml
!include https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Component.puml
LAYOUT_WITH_LEGEND()

Container_Boundary(Database, "Database") {
    Component(Transaction_Repository, "Transaction Repository", "PostgreSQL", "Handle CRUD operations for transaction records and manage transaction buffering during network outages.")
    Component(Promotion_Repository, "Promotion Repository", "PostgreSQL", "Manage CRUD operations for promotions and loyalty points, providing real-time access to promotion data.")
    Component(User_Repository, "User Repository", "PostgreSQL", "Manage user data and roles for access control.")
    Component(Receipt_Repository, "Receipt Repository", "PostgreSQL", "Manage receipt generation and storage.")
    Component(Caching_Layer, "Caching Layer (Redis)", "Redis", "Cache frequently accessed data to improve performance.")
}

Rel(Transaction_Repository, Promotion_Repository, "Interacts with", "CRUD operations")
Rel(Transaction_Repository, Receipt_Repository, "Interacts with", "CRUD operations")
Rel(Promotion_Repository, Caching_Layer, "Interacts with", "Caching")
Rel(User_Repository, Transaction_Repository, "Interacts with", "User access for transactions")
Rel(Receipt_Repository, Transaction_Repository, "Interacts with", "Receipt management")
@enduml