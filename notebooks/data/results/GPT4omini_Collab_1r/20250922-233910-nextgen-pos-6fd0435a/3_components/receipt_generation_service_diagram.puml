@startuml
!include https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Component.puml
LAYOUT_WITH_LEGEND()

System_Boundary(ReceiptGenerationService, "Receipt Generation Service") {
    Component(API_Controller, "API Controller", "Node.js, Express", "Handle incoming HTTP requests related to receipt generation, validate input data, and return responses.")
    Component(Receipt_Service, "Receipt Service", "Node.js, Express", "Orchestrate the receipt generation process, including formatting and data retrieval.")
    Component(Receipt_Repository, "Receipt Repository", "PostgreSQL", "Handle data persistence for receipts, including storage and retrieval from the database.")
    Component(Email_Service, "Email Service", "Node.js, Express", "Interface with an external email service provider to send email receipts.")
    Component(QR_Code_Generator, "QR Code Generator", "Node.js, Express", "Generate QR codes for receipts that link to transaction details.")
}

Rel(API_Controller, Receipt_Service, "Interacts with to handle requests for receipt generation and email sending.")
Rel(Receipt_Service, Receipt_Repository, "Communicates with to save and retrieve receipt data.")
Rel(Receipt_Service, Email_Service, "Interacts with to send email receipts after a transaction is completed.")
Rel(Receipt_Service, QR_Code_Generator, "Utilizes to create QR codes included in both printed and emailed receipts.")

@enduml