@startuml
!include https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Component.puml
LAYOUT_WITH_LEGEND()

System_Boundary(payment_processing_service, "Payment Processing Service") {
    Component(api_controller, "API Controller", "Spring MVC Controller", "Expose RESTful endpoints for payment-related operations, validate incoming requests, and handle HTTP responses.")
    Component(payment_service, "Payment Service", "Spring Boot Service", "Orchestrate payment processing logic, including interaction with external payment gateways and handling business rules.")
    Component(payment_gateway_adapter, "Payment Gateway Adapter", "Adapter", "Abstract the integration with external payment providers and manage API calls and responses.")
    Component(transaction_repository, "Transaction Repository", "Spring Data Repository", "Manage persistence of payment transaction data in PostgreSQL and provide methods for transaction records.")
    Component(domain_model, "Domain Model", "Domain Model", "Represent core entities related to payment processing and define business rules and validation logic.")
}

Rel(api_controller, payment_service, "Interacts with to process payment requests.")
Rel(payment_service, payment_gateway_adapter, "Uses to interact with external payment services.")
Rel(payment_service, transaction_repository, "May interact with to log payment transactions.")
Rel(payment_service, domain_model, "Uses to create and manipulate payment-related data.")
Rel(transaction_repository, payment_service, "Interacts with to store transaction details after processing payments.")