@startuml
!include https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Component.puml
LAYOUT_WITH_LEGEND()

System_Boundary(circulation_management_service, "Circulation Management Service") {
    Component(api_controller, "API Controller", "Spring MVC Controller", "Handles incoming HTTP requests related to circulation management (e.g., checkouts, returns, renewals). Validates input data and maps requests to service methods.")
    Component(service_layer, "Service Layer", "Spring Service", "Implements business logic for circulation management. Coordinates between the API Controller and the Repository.")
    Component(repository, "Repository", "Spring Data JPA", "Interacts with the PostgreSQL database to perform CRUD operations on circulation-related data.")
    Component(domain_model, "Domain Model", "Java Classes", "Represents the core entities involved in circulation management (e.g., User, Item, Transaction).")
    Component(event_publisher, "Event Publisher", "Spring Event", "Publishes events related to circulation actions for other services to consume.")
}

Rel(api_controller, service_layer, "Calls methods on", "HTTP")
Rel(service_layer, repository, "Interacts with", "JPA")
Rel(service_layer, domain_model, "Uses", "Java")
Rel(service_layer, event_publisher, "Publishes events through", "Spring Event")
Rel(domain_model, repository, "Managed by", "JPA")