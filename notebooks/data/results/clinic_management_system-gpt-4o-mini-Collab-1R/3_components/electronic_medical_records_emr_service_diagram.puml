@startuml
!include https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Component.puml
LAYOUT_WITH_LEGEND()

System_Boundary(emr_service, "Electronic Medical Records (EMR) Service") {
    Component(api_controller, "API Controller", "ASP.NET Core or Spring Boot", "Handles incoming HTTP requests related to EMR operations, validates input data, and returns appropriate HTTP responses.")
    Component(service_layer, "Service Layer", "ASP.NET Core or Spring Boot", "Contains business logic for managing EMR operations, coordinates between the API Controller and the Repository, and implements audit trail functionality.")
    Component(repository, "Repository", "Entity Framework or JPA", "Interacts with the database to perform CRUD operations on EMR data, implements data access patterns, and ensures data integrity.")
    Component(domain_model, "Domain Model", "C# or Java", "Represents the core data structures for EMR, encapsulates business rules and validation logic.")
    Component(audit_trail_component, "Audit Trail Component", "ASP.NET Core or Spring Boot", "Tracks changes made to EMR records for compliance, logs user actions and timestamps for accountability.")
}

Rel(api_controller, service_layer, "Calls to execute business logic and retrieve data.")
Rel(service_layer, repository, "Interacts to perform data operations and manage transactions.")
Rel(service_layer, audit_trail_component, "Invokes to log actions related to EMR records.")
Rel(repository, domain_model, "Uses to map data between the database and application objects.")
Rel(audit_trail_component, domain_model, "References to log specific changes related to EMR entities.")
@enduml