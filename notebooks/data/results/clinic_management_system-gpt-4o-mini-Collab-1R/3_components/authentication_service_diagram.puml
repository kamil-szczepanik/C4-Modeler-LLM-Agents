@startuml
!include https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Component.puml
LAYOUT_WITH_LEGEND()

System_Boundary(auth_service, "Authentication Service") {
    Component(api_controller, "API Controller", "RESTful API", "Handle incoming authentication requests (login, logout, token refresh) and validate input data.")
    Component(auth_service_comp, "Authentication Service", "Core Authentication Logic", "Implement the core authentication logic, manage multi-factor authentication (MFA) processes.")
    Component(user_repository, "User Repository", "Database Access Layer", "Interact with the database to retrieve and store user information, handle user data access and persistence.")
    Component(token_management, "Token Management", "Token Handling", "Generate, validate, and revoke authentication tokens, handle token expiration and refresh logic.")
    Component(audit_logging, "Audit Logging", "Logging Service", "Maintain an audit trail of authentication events (successful logins, failed attempts, MFA events).")
}

Rel(api_controller, auth_service_comp, "Invokes")
Rel(auth_service_comp, user_repository, "Uses for user data access")
Rel(auth_service_comp, token_management, "Calls for token generation and validation")
Rel(auth_service_comp, audit_logging, "Logs authentication events")
Rel(api_controller, token_management, "Requests token operations")
Rel(api_controller, audit_logging, "Records events for compliance")